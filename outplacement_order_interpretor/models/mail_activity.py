# -*- coding: utf-8 -*-

import logging
import traceback
import json
from odoo import api, models, fields, tools, _

_logger = logging.getLogger(__name__)


class MailActivity(models.Model):
    _inherit = "mail.activity"

    LANGUAGE_CODES = (
        ("239", "Afar"),
        ("240", "Afrikaans"),
        ("242", "Akan"),
        ("243", "Albanska"),
        ("247", "Arabiska"),
        ("248", "Arameiska"),
        ("249", "Armeniska"),
        ("250", "Assamesiska"),
        ("251", "Aymara"),
        ("253", "Baluchiska"),
        ("254", "Bambara"),
        ("255", "Banda"),
        ("257", "Basjkiriska"),
        ("258", "Baskiska"),
        ("259", "Bemba"),
        ("262", "Bislama"),
        ("263", "Bihariska"),
        ("265", "Bosniska"),
        ("266", "Bulgariska"),
        ("269", "Cebuano"),
        ("274", "Danska"),
        ("277", "Dinka"),
        ("278", "Divehi"),
        ("280", "Dyula"),
        ("281", "Bhutanesiska"),
        ("282", "Efik"),
        ("283", "Engelska"),
        ("285", "Estniska"),
        ("286", "Ewe"),
        ("287", "Fang"),
        ("289", "Färöiska"),
        ("291", "Fidjianska"),
        ("292", "Finska"),
        ("293", "Fon"),
        ("295", "Franska"),
        ("296", "Frisiska"),
        ("298", "Fulfulde"),
        ("301", "Galiciska"),
        ("304", "Gaeliska (Skotsk)"),
        ("305", "Georgiska"),
        ("306", "Grekiska"),
        ("307", "Grönländska"),
        ("308", "Guarani"),
        ("312", "Zenaga"),
        ("313", "Hausa"),
        ("314", "Hebreiska"),
        ("315", "Herero"),
        ("316", "Hindi"),
        ("317", "Igbo"),
        ("318", "Gilbertesiska"),
        ("319", "Indonesiska"),
        ("320", "Iriska"),
        ("321", "Isländska"),
        ("322", "Italienska"),
        ("323", "Japanska"),
        ("324", "Javanesiska"),
        ("325", "Jiddisch"),
        ("327", "Kabyliska"),
        ("329", "Kamba"),
        ("330", "Kanaresiska"),
        ("332", "Kanuri"),
        ("333", "Karen"),
        ("335", "Katalanska"),
        ("337", "Kazakiska"),
        ("338", "Khmer"),
        ("339", "Rikskinesiska/Mandarin"),
        ("340", "Kinyarwanda"),
        ("342", "Kirundi"),
        ("343", "Kongo"),
        ("344", "Konkani"),
        ("345", "Koreanska"),
        ("346", "Korsikanska"),
        ("348", "Kreolska o pidginspråk, portugisisk-baserade,andra"),
        ("350", "Kroatiska"),
        ("351", "Kru"),
        ("352", "Kurdiska"),
        ("353", "Kikuyu"),
        ("356", "Lettiska"),
        ("357", "Lamba"),
        ("358", "Lingala"),
        ("359", "Litauiska"),
        ("360", "Lozi"),
        ("361", "Luba-Katanga"),
        ("362", "Ganda"),
        ("364", "Lunda"),
        ("365", "Luo (Kenya och Tanzania)"),
        ("368", "Luxemburgiska"),
        ("369", "Maduresiska"),
        ("370", "Makedonska"),
        ("372", "Malagassiska"),
        ("374", "Malayalam"),
        ("376", "Maltesiska"),
        ("381", "Manx"),
        ("382", "Maori"),
        ("383", "Marathi"),
        ("384", "Mariska"),
        ("385", "Marwariska"),
        ("386", "Masai"),
        ("387", "Maya"),
        ("388", "Mende"),
        ("390", "Moldaviska"),
        ("393", "Mossi"),
        ("397", "Nauhatl"),
        ("398", "Nauru"),
        ("399", "Nauriska"),
        ("400", "Ndebele Nord"),
        ("401", "Nederländska"),
        ("404", "Norska"),
        ("405", "Nyamwezi"),
        ("406", "Nyanja"),
        ("407", "Occitanska"),
        ("408", "Oriya"),
        ("412", "Pashto"),
        ("414", "Persiska (farsi)"),
        ("415", "Polska"),
        ("416", "Portugisiska"),
        ("418", "Quechua"),
        ("420", "Retoromanska"),
        ("421", "Romani"),
        ("422", "Rumänska"),
        ("424", "Ryska"),
        ("425", "Samiska"),
        ("426", "Samoanska"),
        ("427", "Sango"),
        ("428", "Santali"),
        ("430", "Sardiska/Sardiniska"),
        ("432", "Serbiska"),
        ("434", "Sesotho/Sesuto/Sotho"),
        ("435", "Tswana"),
        ("438", "Shona"),
        ("440", "Sindhi"),
        ("441", "Singalesiska/Sinhala"),
        ("442", "Swazi/Swati"),
        ("444", "Skotska"),
        ("445", "Slovakiska"),
        ("446", "Slovenska"),
        ("447", "Somaliska"),
        ("448", "Songhai"),
        ("450", "Sorbiska språk"),
        ("451", "Spanska"),
        ("453", "Susu"),
        ("455", "Swahili"),
        ("457", "Syrianska"),
        ("459", "Tagalog"),
        ("460", "Tahitiska"),
        ("461", "Tamashek"),
        ("463", "Tamil/Tamilska"),
        ("465", "Tatariska"),
        ("466", "Telugu"),
        ("467", "Timne"),
        ("469", "Thailändska"),
        ("470", "Tibetanska"),
        ("471", "Tigre"),
        ("472", "Tigrinja/Tigrinska"),
        ("473", "Tjeckiska"),
        ("475", "Tjuvasjiska"),
        ("476", "Tok Pisin"),
        ("477", "Tonga (Nyasa)"),
        ("481", "Turkiska"),
        ("483", "Twi"),
        ("484", "Tyska"),
        ("485", "Uiguriska"),
        ("486", "Ukrainska"),
        ("487", "Umbundu"),
        ("488", "Ungerska"),
        ("489", "Urdu"),
        ("491", "Uzbekiska"),
        ("492", "Vietnamesiska"),
        ("493", "Vitryska"),
        ("494", "Walesiska"),
        ("495", "Wolof"),
        ("496", "Xhosa/Isixhosa"),
        ("498", "Yoruba"),
        ("499", "Zande/Azande"),
        ("500", "Zhuang"),
        ("501", "Zulu"),
        ("502", "Svenska"),
        ("10015", "Adangme"),
        ("10017", "Afrihili"),
        ("10266", "Akkadiska"),
        ("10267", "Aleutiska"),
        ("10268", "Algokinspråk"),
        ("10270", "Apachespråk"),
        ("10271", "Arapaho"),
        ("10272", "Araukiska"),
        ("10273", "Arawak"),
        ("10275", "Athapaskspråk"),
        ("10276", "Australiska språk"),
        ("10277", "Austronesiska språk, andra"),
        ("10278", "Avariska"),
        ("10279", "Avestiska"),
        ("10280", "Awadhi"),
        ("10282", "Acoli"),
        ("10283", "Abkhasiska"),
        ("10284", "Akinesiska"),
        ("10285", "Balinesiska"),
        ("10288", "Bamilekespråk"),
        ("10289", "Basa"),
        ("10290", "Batak (Indonésien)"),
        ("10291", "Bedja"),
        ("10292", "Bodjpuri"),
        ("10294", "Bini"),
        ("10295", "Braj"),
        ("10296", "Bretonska"),
        ("10297", "Buginesiska"),
        ("10298", "Burjatiska"),
        ("10299", "Caddo"),
        ("10300", "Karibiska"),
        ("10305", "Chagatai"),
        ("10307", "Chamorro"),
        ("10308", "Tjetjenska"),
        ("10309", "Cherokee"),
        ("10310", "Cheyenne"),
        ("10311", "Chibcha"),
        ("10312", "Tsjinuksjargong"),
        ("10313", "Chipewyan"),
        ("10314", "Choctaw"),
        ("10315", "Kyrkslaviska"),
        ("10316", "Chuukesiska"),
        ("10317", "Koptiska"),
        ("10318", "Korniska"),
        ("10319", "Cree"),
        ("10320", "Muskogee"),
        ("10321", "Kreolska och pidginspråk, andra"),
        ("10322", "Kreolska och pidginspråk, engelsk-baserade, andra"),
        ("10323", "Kreolska och pidginspråk, fransk-baserade, andra"),
        ("10325", "Dakota"),
        ("10326", "Dajak"),
        ("10327", "Delaware"),
        ("10328", "Dogri"),
        ("10329", "Dogrib"),
        ("10331", "Duala"),
        ("10333", "Egyptiska"),
        ("10334", "Ekajuk"),
        ("10335", "Elamitiska"),
        ("10339", "Éwondo"),
        ("10342", "Friuliska"),
        ("10344", "Gayo"),
        ("10345", "Gbaya"),
        ("10346", "Geez"),
        ("10351", "Gondi"),
        ("10352", "Gorontalo"),
        ("10353", "Gotiska"),
        ("10354", "Grebo"),
        ("10356", "Gwich'in"),
        ("10357", "Haida"),
        ("10358", "Hawaiiska"),
        ("10359", "Hiligaynon"),
        ("10360", "Himachali"),
        ("10361", "Hiri Motu"),
        ("10362", "Hettittiska"),
        ("10363", "Hmong"),
        ("10364", "Hupa"),
        ("10365", "Iban"),
        ("10366", "Ijo"),
        ("10370", "Interlingua"),
        ("10371", "Inuktitut"),
        ("10372", "Inupiak"),
        ("10376", "Irokesarspråk"),
        ("10377", "Judeo-arabisk"),
        ("10378", "Judeo-persiska"),
        ("10379", "Kachin"),
        ("10381", "Karakalpak"),
        ("10383", "Kawi"),
        ("10384", "Khasi"),
        ("10385", "Khoisanspråk, andra"),
        ("10386", "Khotanesiska"),
        ("10388", "Kimbundu"),
        ("10389", "Komi"),
        ("10390", "Kosraeiska"),
        ("10391", "Kpelle"),
        ("10392", "Kuanyama"),
        ("10393", "Kumykiska"),
        ("10394", "Kurukh"),
        ("10395", "Kutenai"),
        ("10396", "Ladino"),
        ("10397", "Lahnda"),
        ("10400", "Latin"),
        ("10401", "Lesgiska"),
        ("10402", "Luba-Lulua"),
        ("10403", "Luiseno"),
        ("10404", "Lushai"),
        ("10405", "Magahi"),
        ("10406", "Maithili"),
        ("10407", "Makassar"),
        ("10408", "Mandingo"),
        ("10409", "Manipuriska"),
        ("10410", "Manobospråk"),
        ("10411", "Marshalliska"),
        ("10412", "Micmac"),
        ("10413", "Minangkabau"),
        ("10415", "Mohawk"),
        ("10417", "Mongo"),
        ("10420", "Mundspråk"),
        ("10422", "Ndebele Syd"),
        ("10423", "Ndonga"),
        ("10424", "Newari"),
        ("10425", "Nias"),
        ("10428", "Niuea"),
        ("10432", "Nyankole"),
        ("10433", "Nyoro"),
        ("10434", "Nzima"),
        ("10435", "Ojibwa"),
        ("10436", "Osage"),
        ("10437", "Ossetiska"),
        ("10439", "Pahlavi"),
        ("10440", "Palauiska"),
        ("10441", "Pali"),
        ("10443", "Pangasinan"),
        ("10444", "Papiamento"),
        ("10448", "Fönikiska"),
        ("10449", "Pohnpei"),
        ("10450", "Prakrit"),
        ("10453", "Rajasthanisja; marwariska"),
        ("10454", "Rapanui"),
        ("10455", "Rarotonga"),
        ("10458", "Saliska språk"),
        ("10459", "Samaritansk aramaiska"),
        ("10460", "Sandawe"),
        ("10461", "Sanskrit"),
        ("10462", "Sasak"),
        ("10463", "Selkupiska"),
        ("10465", "Serer"),
        ("10466", "Shan"),
        ("10467", "Sidamo"),
        ("10468", "Siksika"),
        ("10470", "Sioux-språk"),
        ("10473", "Sogdiska"),
        ("10474", "Soninke"),
        ("10475", "Nordsotho"),
        ("10477", "Sukuma"),
        ("10478", "Sumeriska"),
        ("10479", "Sundanesiska"),
        ("10481", "Tereno"),
        ("10482", "Tetum"),
        ("10484", "Tiv"),
        ("10485", "Tlingit"),
        ("10486", "Tokelau"),
        ("10487", "Tonganska"),
        ("10488", "Tsimshian"),
        ("10489", "Tsonga"),
        ("10491", "Tumbuka"),
        ("10493", "Tuvalu"),
        ("10494", "Tuvinska"),
        ("10495", "Ugaritiska"),
        ("10496", "Vai"),
        ("10497", "Venda"),
        ("10498", "Volapük"),
        ("10499", "Votiska"),
        ("10500", "Wakashan språk"),
        ("10501", "Walamo"),
        ("10503", "Washo"),
        ("10506", "Jakutiska"),
        ("10507", "Yao"),
        ("10508", "Yapese"),
        ("10510", "Zapotekiska"),
        ("10512", "Zuni"),
        ("10515", "Meänkieli/Tornedalsfinska"),
        ("10516", "Dari"),
        ("10517", "Assyriska"),
        ("10519", "Saho"),
        ("S0001", "Afariska"),
        ("S0002", "Amarinja/Amhariska"),
        ("S0004", "Arakanska"),
        ("S0005", "Ark"),
        ("S0006", "Armeniska [Armenien, Ryssland]"),
        ("S0007", "Armeniska [Iran]"),
        ("S0008", "Armeniska [Libanon,Syrien,Turkiet]"),
        ("S0009", "Aromunska"),
        ("S0010", "Ashanti"),
        ("S0011", "Ashkali"),
        ("S0012", "Assyriska, öst / Asuraya"),
        ("S0013", "Assyriska,väst / Suryoyo"),
        ("S0014", "Assyriska/Ashuri"),
        ("S0015", "Aswanik"),
        ("S0016", "Azari"),
        ("S0017", "Azerbadjanska"),
        ("S0018", "Azeriska"),
        ("S0019", "Badini / Badinani"),
        ("S0020", "Bajuni"),
        ("S0021", "Baluchi / Balochi"),
        ("S0022", "Baoulé"),
        ("S0023", "Bengali/Bengaliska"),
        ("S0024", "Berberiska [Algeriet]"),
        ("S0025", "Berberiska [Libyen]"),
        ("S0026", "Berberiska [Marocko]"),
        ("S0027", "Beti"),
        ("S0028", "Bhojpuri"),
        ("S0029", "Bikol / Bikolano"),
        ("S0030", "Blin/Bilen"),
        ("S0031", "Bridga"),
        ("S0032", "Burmesiska / Burmanska"),
        ("S0033", "Chao Chow / Chaozhou"),
        ("S0034", "Chin"),
        ("S0035", "Ciluba"),
        ("S0036", "Dagbani"),
        ("S0037", "Darginska"),
        ("S0038", "Datcha"),
        ("S0039", "Diawara"),
        ("S0040", "Dioula"),
        ("S0041", "Edo"),
        ("S0043", "Fanti / Fante"),
        ("S0044", "Feyli / Feijli / Feili"),
        ("S0045", "Fu-Kien"),
        ("S0046", "Fula / Fulani"),
        ("S0047", "Gadyaga"),
        ("S0048", "Gah / Ga"),
        ("S0049", "Gamo-Gofa-Dawro"),
        ("S0050", "Gilaki"),
        ("S0051", "Gorani"),
        ("S0052", "Goun"),
        ("S0053", "Gujarati / Gujaratiska"),
        ("S0054", "Guragigna"),
        ("S0055", "Hadiyigna"),
        ("S0056", "Hakka"),
        ("S0057", "Hangzhou"),
        ("S0058", "Harari"),
        ("S0059", "Hawrami / Hewrami"),
        ("S0060", "Hazaragi"),
        ("S0061", "Hebei"),
        ("S0062", "Ibanag"),
        ("S0063", "Ibo"),
        ("S0064", "Ikka"),
        ("S0065", "Ilocano / Ilokano / Iloko"),
        ("S0066", "Ilongo / Ilonggo"),
        ("S0067", "Ishan"),
        ("S0068", "Isoko"),
        ("S0069", "Itsekiri"),
        ("S0070", "Jola-Fonyi"),
        ("S0071", "Kaldeiska /Kildani"),
        ("S0072", "Kalenjin"),
        ("S0073", "Kambodjanska"),
        ("S0074", "Kannada"),
        ("S0075", "Kantonesiska"),
        ("S0077", "Kashmiri / Kasmiriska"),
        ("S0079", "Kikongo"),
        ("S0080", "Kimeru"),
        ("S0081", "Kirgisiska / Kirgiziska"),
        ("S0082", "Kissi"),
        ("S0083", "Kituba"),
        ("S0084", "Kotokoli"),
        ("S0085", "Kreolengelska"),
        ("S0086", "Kreolfranska"),
        ("S0087", "Kreolportugesiska"),
        ("S0088", "Krio (Sierra Leone)"),
        ("S0089", "Kurmanji [Irak,Syrien]"),
        ("S0090", "Kurmanji [Iran]"),
        ("S0091", "Kurmanji [Nordkurdiska]"),
        ("S0092", "Kurmanji [Turkiet,övriga länder]"),
        ("S0093", "Kuy"),
        ("S0094", "Laotiska /Lao"),
        ("S0095", "Luganda"),
        ("S0096", "Luyia"),
        ("S0097", "Maay"),
        ("S0098", "Mai-Mai"),
        ("S0099", "Malaysiska"),
        ("S0100", "Malinke"),
        ("S0102", "Mandinka"),
        ("S0103", "Mapudungun"),
        ("S0104", "Maraka"),
        ("S0105", "Marockanska"),
        ("S0106", "Matti"),
        ("S0107", "Mazanderani"),
        ("S0108", "Min nan"),
        ("S0109", "Mina"),
        ("S0110", "Mingreliska"),
        ("S0111", "Mongoliska / Mongolska"),
        ("S0112", "Mulenge"),
        ("S0113", "Nederländska / Holländska / Flamländska"),
        ("S0114", "Nepalesiska / Nepali"),
        ("S0115", "Nordsamiska"),
        ("S0116", "Nuer"),
        ("S0117", "Nyankore"),
        ("S0118", "Oromiska / Oromo"),
        ("S0119", "Pampango / Pampangan"),
        ("S0120", "Pasjtunksa / Pashtu / Pashto"),
        ("S0121", "Punjabiska / Punjabi / Punjabo"),
        ("S0122", "Pwo Karen"),
        ("S0123", "Qingtianska"),
        ("S0124", "Rif"),
        ("S0125", "Rohingya"),
        ("S0126", "Romani [Balkan]"),
        ("S0127", "Romani [Bulgarien]"),
        ("S0128", "Romani [Makedonien]"),
        ("S0129", "Romani [Rumänien,Moldavien]"),
        ("S0130", "Romani [Slovakien]"),
        ("S0131", "Runyankole"),
        ("S0132", "Runyanrwanda"),
        ("S0133", "Rwandiska/burundiska"),
        ("S0135", "Sarakole / Soninke"),
        ("S0136", "Serer-Sine"),
        ("S0137", "Shanghaikinesiska"),
        ("S0138", "Sichuankinesiska"),
        ("S0139", "Silabe"),
        ("S0140", "Siltigna"),
        ("S0141", "Somaliska / Somali"),
        ("S0142", "Sorani (Sydkurdiska)"),
        ("S0143", "Sotho"),
        ("S0144", "Soussou / Susu / Suzu"),
        ("S0145", "Sylheti"),
        ("S0146", "Tadzjikiska"),
        ("S0147", "Tchamba"),
        ("S0148", "Temne"),
        ("S0152", "Toubakai"),
        ("S0153", "Tshiluba"),
        ("S0154", "Turkmenska / Turkmeniska"),
        ("S0155", "Urhobo"),
        ("S0156", "Uyguriska / Uiguriska"),
        ("S0157", "Wakore"),
        ("S0158", "Waray-Waray"),
        ("S0159", "Visaya"),
        ("S0161", "Wu"),
        ("S0162", "Zaza / Zazaki"))

    interpreter_language = fields.Selection(
        selection=LANGUAGE_CODES,
        string="Interpreter Language")
    interpreter_gender_preference = fields.Selection([
        ('male', 'Male'),
        ('female', 'Female'),
        ('no_preference', 'no preference')],
        string="Gender Preference")
    location_type = fields.Selection([
        ('on_premise', 'On premise'),
        ('telephone', 'Telephone')],
        string='Location')
    time_start = fields.Datetime('Start Time')
    time_end = fields.Datetime('End Time')
    phone = fields.Char()
    street = fields.Char('Street')
    street2 = fields.Char('Street2')
    zip = fields.Char('Zip', change_default=True)
    city = fields.Char('City')
    state_id = fields.Many2one("res.country.state", string='State')
    country_id = fields.Many2one('res.country', string='Country')
    interpeter_booking_ref = fields.Char('Booking Reference')
    Interpreteter_booking_status = fields.Char('Booking Status')
    department_id = fields.Many2one('hr.department', 'Department')

    @api.multi
    def action_create_calendar_event(self):
        self.ensure_one()
        action = self.env.ref('calendar.action_calendar_event').read()[0]
        action['context'] = {
            'default_activity_type_id': self.activity_type_id.id,
            'default_res_id': self.env.context.get('default_res_id'),
            'default_res_model': self.env.context.get('default_res_model'),
            'default_name': self.summary or self.res_name,
            'default_description': self.note and tools.html2plaintext(
                self.note).strip() or '',
            'default_activity_ids': [(6, 0, self.ids)],
            'initial_date': self.date_deadline,
        }
        return action

    @api.model
    def create(self, vals):
        record = super(MailActivity, self).create(vals)
        order_interpreter = self.env.ref(
            'outplacement_order_interpretor.order_interpreter').id
        if record.activity_type_id.id == order_interpreter:
            try:
                resp = self.env[
                    'ipf.interpreter.client'].post_tolkbokningar(record)
            except Exception as e:
                _logger.error(e)
                _logger.error(traceback.format_exc())
                resp = None
            if resp:
                try:
                    record.processing_response(resp)
                except Exception as e:
                    _logger.error(e)
                    _logger.error(traceback.format_exc())
        return record

    @api.model
    def processing_response(self, response):
        if response.status_code == 200:
            data = json.loads(response.content.decode())
            self.booking_ref = data.get('tolkbokningId')
            
    @api.model
    def cron_order_interpretator(self):
        pass
